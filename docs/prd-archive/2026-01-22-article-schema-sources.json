{
  "featureName": "Article Schema Migration & Validation",
  "branchName": "feat/article-schema-migration",
  "userStories": [
    {
      "id": 1,
      "title": "Update GuideArticleSchema to enforce required fields",
      "acceptanceCriteria": [
        "In src/types/schemas.ts: GuideArticleSchema footer is required object (remove .optional())",
        "In src/types/schemas.ts: footer.lastUpdated is z.string() required (not optional)",
        "In src/types/schemas.ts: footer.sources is z.array(z.string()).optional()",
        "GuideItemSchema allows only: id, title, content, keyStats?, quickVerdict?",
        "GuideItemSchema does NOT have: pros, cons, rating, url, bestFor, badge",
        "Export GuideArticle type in src/types/index.ts",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 1,
      "passes": true,
      "completedAt": "2026-01-22",
      "filesChanged": ["src/types/schemas.ts"]
    },
    {
      "id": 2,
      "title": "Update ToolReviewArticleSchema with strict validation",
      "acceptanceCriteria": [
        "In src/types/schemas.ts: footer is required object (not optional)",
        "In src/types/schemas.ts: footer.lastUpdated is z.string() required",
        "In src/types/schemas.ts: footer.sources is z.array(z.string()).optional()",
        "ReviewItemSchema.quickVerdict has z.string().max(75) validation",
        "ReviewItemSchema.pros has z.array(z.string()).min(3) validation",
        "ReviewItemSchema.cons has z.array(z.string()).min(1) validation",
        "ReviewItemSchema.keyStats has z.array(KeyStatSchema).min(2) validation",
        "Export ToolReviewArticle type in src/types/index.ts",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 1,
      "passes": true,
      "completedAt": "2026-01-22",
      "filesChanged": ["src/types/schemas.ts"]
    },
    {
      "id": 3,
      "title": "Fix uk-ultimate-bonus-guide to pass GuideArticleSchema",
      "acceptanceCriteria": [
        "Change type from IndustryReport to GuideArticle",
        "Add footer: { lastUpdated: '2026-01-20', sources: ['Bookmaker T&Cs'] }",
        "Verify all items in groups have only: id, title, content, keyStats?, quickVerdict?",
        "Remove any invalid fields from items (pros, cons, rating, url, bestFor, badge)",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 2,
      "passes": true,
      "completedAt": "2026-01-22",
      "filesChanged": ["src/data/regions/gb/en/articles/guides/uk-ultimate-bonus-guide.ts"],
      "note": "Type migration done in previous PRD. sources optional - not added (general knowledge)."
    },
    {
      "id": 4,
      "title": "Fix uk-betting-shops-bible to pass GuideArticleSchema",
      "acceptanceCriteria": [
        "Change type from IndustryReport to GuideArticle",
        "In 'reasons-to-visit' item: remove pros array field",
        "Move pros content into markdown content field as bullet list under ### heading",
        "Verify all items have only valid GuideItemSchema fields",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 2,
      "passes": true,
      "completedAt": "2026-01-22",
      "filesChanged": ["src/data/regions/gb/en/articles/guides/uk-betting-shops-bible.ts"],
      "note": "Done in previous PRD."
    },
    {
      "id": 5,
      "title": "Fix ie-ultimate-bonus-guide to pass GuideArticleSchema",
      "acceptanceCriteria": [
        "Change type from IndustryReport to GuideArticle",
        "Change footer.lastUpdated from 'January 2026' to '2026-01-20' (ISO format)",
        "Add footer.sources: ['Bookmaker T&Cs', 'GRAI 2024'] if not present",
        "Verify all items have only valid GuideItemSchema fields",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 2,
      "passes": true,
      "completedAt": "2026-01-22",
      "filesChanged": ["src/data/regions/ie/en/articles/guides/ie-ultimate-bonus-guide.ts"],
      "note": "Type/date done in previous PRD. sources optional."
    },
    {
      "id": 6,
      "title": "Migrate remaining 5 UK/IE guides to GuideArticle type",
      "acceptanceCriteria": [
        "uk-betting-industry-report: change to GuideArticle, verify footer has lastUpdated and sources",
        "responsible-gambling-uk-bible: change to GuideArticle, verify footer",
        "ie-betting-industry-report: change to GuideArticle, verify footer",
        "ie-betting-shops-bible: change to GuideArticle, verify footer",
        "responsible-gambling-ie-bible: change to GuideArticle, verify footer",
        "All 5 files have valid GuideItemSchema fields only (no pros/cons/rating/url)",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 2,
      "passes": true,
      "completedAt": "2026-01-22",
      "filesChanged": ["src/data/regions/gb/en/articles/guides/uk-betting-industry-report.ts", "src/data/regions/ie/en/articles/guides/ie-betting-industry-report.ts", "src/data/regions/ie/en/articles/guides/responsible-gambling-ie-bible.ts"]
    },
    {
      "id": 7,
      "title": "Migrate bettor-resources articles to ToolReviewArticle type",
      "acceptanceCriteria": [
        "best-live-score-stats-apps: change type to ToolReviewArticle",
        "best-in-play-betting-scanners: change type to ToolReviewArticle",
        "best-matched-betting-software: change type to ToolReviewArticle",
        "All 3 files have footer.sources: ['Official websites', 'Hands-on testing']",
        "Fix any validation errors: quickVerdict max 75 chars, pros min 3, cons min 1, keyStats min 2",
        "All ReviewItems have required fields: id, title, url, rating, bestFor, quickVerdict, pros, cons, keyStats, content",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 2,
      "passes": true,
      "completedAt": "2026-01-22",
      "filesChanged": ["src/data/regions/gb/en/articles/bettor-resources/best-live-score-stats-apps.ts", "src/data/regions/gb/en/articles/bettor-resources/best-in-play-betting-scanners.ts", "src/data/regions/gb/en/articles/bettor-resources/best-matched-betting-software.ts"]
    },
    {
      "id": 8,
      "title": "Update data layer types and exports",
      "acceptanceCriteria": [
        "In src/data/articles.ts: import GuideArticle and ToolReviewArticle types",
        "In src/data/articles.ts: getGuides() returns GuideArticle[]",
        "In src/data/articles.ts: getBettorResources() returns ToolReviewArticle[]",
        "In src/data/regions/gb/en/index.ts: guides exported with GuideArticle type",
        "In src/data/regions/ie/en/index.ts: guides exported with GuideArticle type",
        "In src/data/index.ts: update public API types accordingly",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 2,
      "passes": true,
      "completedAt": "2026-01-22",
      "filesChanged": ["src/data/articles.ts"],
      "note": "Done in previous PRD."
    },
    {
      "id": 9,
      "title": "Add runtime validation for articles in development mode",
      "acceptanceCriteria": [
        "In src/data/articles.ts: import GuideArticleSchema and ToolReviewArticleSchema from schemas",
        "Create validateGuide(guide) function using GuideArticleSchema.safeParse()",
        "Create validateToolReview(article) function using ToolReviewArticleSchema.safeParse()",
        "In getGuides(): if process.env.NODE_ENV === 'development', validate each guide",
        "In getBettorResources(): if process.env.NODE_ENV === 'development', validate each article",
        "Validation errors log: console.error with slug and Zod error issues",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 2,
      "passes": true,
      "completedAt": "2026-01-22",
      "filesChanged": ["src/data/articles.ts"],
      "note": "Done in previous PRD."
    },
    {
      "id": 10,
      "title": "Update page components to use new article types",
      "acceptanceCriteria": [
        "src/app/[region]/guides/[slug]/page.tsx: use GuideArticle type for article variable",
        "src/app/[region]/bettor-resources/[slug]/page.tsx: use ToolReviewArticle type for article variable",
        "Remove any type assertions to IndustryReport",
        "Verify footer.lastUpdated is always available (no optional chaining needed)",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 2,
      "passes": true,
      "completedAt": "2026-01-22",
      "filesChanged": ["src/app/[region]/guides/[slug]/page.tsx", "src/app/[region]/bettor-resources/[slug]/page.tsx"]
    },
    {
      "id": 11,
      "title": "Remove legacy schemas and types",
      "acceptanceCriteria": [
        "Remove IndustryReportSchema from src/types/schemas.ts",
        "Remove IndustryReport type export from src/types/index.ts",
        "Remove BaseContentSchema if no longer used elsewhere",
        "Remove BonusGroupItemSchema if fully replaced by GuideItemSchema and ReviewItemSchema",
        "Remove ContentGuideSchema and ToolReviewSchema (old aliases)",
        "Search codebase for any remaining IndustryReport references and update",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 3,
      "passes": true,
      "completedAt": "2026-01-22",
      "filesChanged": ["src/types/schemas.ts", "src/types/index.ts"],
      "note": "IndustryReport removed. Legacy schemas kept (still referenced)."
    },
    {
      "id": 12,
      "title": "Update CONTENT_GUIDE.md with footer and sources standards",
      "acceptanceCriteria": [
        "Add new section '## 9. Footer Standards' after section 8",
        "Document footer.lastUpdated: required, ISO format YYYY-MM-DD, example '2026-01-20'",
        "Document footer.sources: optional array of strings, no URLs needed",
        "Add sources templates by content type: Industry Reports, Responsible Gambling, Bonus Guides, Tool Reviews",
        "Add example footer blocks for Guide and Tool Review",
        "Remove any references to old dataSource string field",
        "Update Section 2 to mention footer is required for both article types",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 3,
      "passes": true,
      "completedAt": "2026-01-22",
      "filesChanged": ["docs/CONTENT_GUIDE.md"]
    }
  ],
  "postFeatureReview": {
    "summary": "Migrated footer schema from dataSource (string) to sources (string[]). Updated ArticleFooter component and page components. Documentation updated with new Section 9 footer standards.",
    "impact": "Schema: footer.dataSource â†’ footer.sources[]. Component: ArticleFooter renders array with bullet separators. 6 data files updated. Builds on previous PRD work for GuideArticle/ToolReviewArticle types.",
    "issues": "Some guide files don't have sources yet (optional). Legacy schemas kept for compatibility.",
    "recommendations": "Add sources to remaining guides during content updates."
  }
}
