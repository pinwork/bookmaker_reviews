{
  "featureName": "Unified Linked Resources System",
  "branchName": "feat/unified-linked-resources",
  "userStories": [
    {
      "id": 1,
      "title": "Define LinkedResource type and schema",
      "acceptanceCriteria": [
        "Create LinkedResource type in src/types/index.ts",
        "Type structure: { id: string; type: 'bookmaker' | 'external' | 'payment'; active: boolean }",
        "Create RESOURCE_TYPES constant in src/data/constants.ts: ['bookmaker', 'external', 'payment'] as const",
        "Add LinkedResourceSchema to src/types/schemas.ts using Zod",
        "Update IndustryReportSchema: add linkedResources: z.array(LinkedResourceSchema).optional()",
        "Keep relatedBookmakers and externalLinks in schema temporarily (for migration)",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 1,
      "passes": true,
      "completedAt": "2026-01-20",
      "filesChanged": [
        "src/data/constants.ts",
        "src/types/schemas.ts",
        "src/types/index.ts"
      ]
    },
    {
      "id": 2,
      "title": "Create External Apps Registry with tableData",
      "acceptanceCriteria": [
        "Create src/data/resources/externalApps.ts",
        "Define ExternalAppResource type: { id, name, url, bgColor?, logo?, tableData: { bestFor, price, sports, keyFeature } }",
        "Add all 9 external apps from best-live-score-stats-apps.ts: flashscore, sofascore, fotmob, fbref, footystats, racing-post, timeform, tennis-explorer, basketball-reference",
        "Each app has complete tableData fields populated from article content",
        "Export getExternalAppById(id: string) function",
        "Export getAllExternalApps() function",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 1,
      "passes": true,
      "completedAt": "2026-01-20",
      "filesChanged": [
        "src/data/resources/externalApps.ts"
      ]
    },
    {
      "id": 3,
      "title": "Create resource resolver utility",
      "acceptanceCriteria": [
        "Create src/utils/linkedResources.ts",
        "Function getActiveLinkedResources(resources: LinkedResource[]): LinkedResource[] — filters active: true only",
        "Function getLinkedResourcesByType(resources: LinkedResource[], type: ResourceType): LinkedResource[] — filters by type",
        "Function resolveBookmakerResources(resources: LinkedResource[], region: string): BookmakerComplete[] — returns full bookmaker data for type='bookmaker'",
        "Function resolveExternalResources(resources: LinkedResource[]): ExternalAppResource[] — returns full external app data from registry",
        "All functions handle undefined/empty arrays gracefully",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 1,
      "passes": true,
      "completedAt": "2026-01-20",
      "filesChanged": [
        "src/utils/linkedResources.ts"
      ]
    },
    {
      "id": 4,
      "title": "Create auto-generating ComparisonTable component",
      "acceptanceCriteria": [
        "Create src/components/article/AutoComparisonTable.tsx",
        "Props: { title: string; resources: ExternalAppResource[]; columns?: string[] }",
        "Default columns: ['App', 'Best For', 'Price', 'Sports', 'Key Feature']",
        "Generates rows automatically from resources[].tableData",
        "First column (name) is clickable link to resource.url",
        "Reuses styling from existing ComparisonTable",
        "Empty resources array renders nothing (no empty table)",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 1,
      "passes": true,
      "completedAt": "2026-01-20",
      "filesChanged": [
        "src/components/article/AutoComparisonTable.tsx"
      ]
    },
    {
      "id": 5,
      "title": "Update CONTENT_GUIDE.md documentation",
      "acceptanceCriteria": [
        "Remove old 'Партнерські посилання' section about externalLinks",
        "Add new section '## Linked Resources' explaining unified system",
        "Document LinkedResource structure: { id, type, active }",
        "Document available types: bookmaker, external, payment",
        "Explain active toggle: active: false hides resource from article UI but keeps the link",
        "Add section '## Resource Registry' explaining where resource data lives",
        "Add section '## Auto-generated Tables' explaining how tables are built from linkedResources",
        "Add examples for each type",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 2,
      "passes": true,
      "completedAt": "2026-01-20",
      "filesChanged": [
        "docs/CONTENT_GUIDE.md"
      ]
    },
    {
      "id": 6,
      "title": "Migrate GB articles to linkedResources",
      "acceptanceCriteria": [
        "Update src/data/regions/gb/en/articles/uk-betting-industry-report.ts: convert relatedBookmakers to linkedResources with type='bookmaker', active=true",
        "Update src/data/regions/gb/en/articles/uk-betting-shops-bible.ts: convert relatedBookmakers to linkedResources",
        "Update src/data/regions/gb/en/articles/uk-ultimate-bonus-guide.ts: convert relatedBookmakers to linkedResources",
        "Update src/data/regions/gb/en/articles/responsible-gambling-uk-bible.ts: convert relatedBookmakers to linkedResources (if exists)",
        "Update src/data/regions/gb/en/articles/best-live-score-stats-apps.ts: convert externalLinks to linkedResources with type='external', active=true",
        "Remove comparisonTable.rows from best-live-score-stats-apps.ts (will be auto-generated)",
        "Keep comparisonTable.title and comparisonTable.headers for customization",
        "Remove relatedBookmakers and externalLinks fields from all migrated articles",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 2,
      "passes": false,
      "completedAt": null,
      "filesChanged": []
    },
    {
      "id": 7,
      "title": "Migrate IE articles to linkedResources",
      "acceptanceCriteria": [
        "Update src/data/regions/ie/en/articles/ie-betting-industry-report.ts: convert relatedBookmakers to linkedResources",
        "Update src/data/regions/ie/en/articles/ie-betting-shops-bible.ts: convert relatedBookmakers to linkedResources",
        "Update src/data/regions/ie/en/articles/ie-ultimate-bonus-guide.ts: convert relatedBookmakers to linkedResources",
        "Update src/data/regions/ie/en/articles/ie-responsible-gambling-bible.ts: convert relatedBookmakers to linkedResources (if exists)",
        "Update any other IE articles with relatedBookmakers or externalLinks",
        "Remove relatedBookmakers and externalLinks fields from all migrated articles",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 2,
      "passes": false,
      "completedAt": null,
      "filesChanged": []
    },
    {
      "id": 8,
      "title": "Update article page to use linkedResources and AutoComparisonTable",
      "acceptanceCriteria": [
        "Update src/app/[region]/guides/[slug]/page.tsx",
        "Import linkedResources utilities from src/utils/linkedResources.ts",
        "Import AutoComparisonTable from src/components/article/AutoComparisonTable",
        "Filter resources using getActiveLinkedResources() before passing to components",
        "For articles with type='external' resources: use AutoComparisonTable instead of ComparisonTable",
        "Pass resolved external resources to AutoComparisonTable",
        "Pass article.comparisonTable.title and article.comparisonTable.headers to AutoComparisonTable",
        "Keep original ComparisonTable for articles with manual rows (backward compatibility)",
        "Pass filtered bookmaker resources to components that render bookmaker cards/banners",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 2,
      "passes": false,
      "completedAt": null,
      "filesChanged": []
    },
    {
      "id": 9,
      "title": "Update ArticleGroups to use resource registry",
      "acceptanceCriteria": [
        "Update src/components/article/ArticleGroups.tsx",
        "Receive resolved ExternalAppResource[] instead of ProcessedExternalLink[]",
        "Use resource.logo and resource.url from registry",
        "Filter by active status happens before component receives data",
        "Component renders only resources it receives (all active)",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 2,
      "passes": false,
      "completedAt": null,
      "filesChanged": []
    },
    {
      "id": 10,
      "title": "Cleanup deprecated fields and old ComparisonTable logic",
      "acceptanceCriteria": [
        "Remove relatedBookmakers from IndustryReportSchema in src/types/schemas.ts",
        "Remove relatedBookmakers from IndustryReport type in src/types/index.ts",
        "Remove externalLinks from IndustryReportSchema (data now in registry)",
        "Update comparisonTable schema: rows becomes optional (for backward compatibility with manual tables)",
        "Remove processExternalLinks function from article page (no longer needed)",
        "Verify all articles compile without deprecated fields",
        "npm run lint passes",
        "npm run build passes"
      ],
      "priority": 3,
      "passes": false,
      "completedAt": null,
      "filesChanged": []
    }
  ],
  "postFeatureReview": null
}
